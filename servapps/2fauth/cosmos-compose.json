{
    "cosmos-installer": {
        "form": [
            {
            "name": "SITE_OWNER",
            "label": "What is your 2FAuth user email?",
            "initialValue": "",
            "type": "text"
            },
            {
            "name": "MAIL_HOST",
            "label": "SMTP host",
            "initialValue": "smtp.gmail.com",
            "type": "text"
            },
            {
            "name": "MAIL_PORT",
            "label": "SMTP port",
            "initialValue": "587",
            "type": "text"
            },
            {
            "name": "MAIL_FROM",
            "label": "Enter 'from' address",
            "initialValue": "",
            "type": "text"
            },
            {
            "name": "MAIL_USERNAME",
            "label": "SMTP username",
            "initialValue": "",
            "type": "text"
            },
            {
            "name": "MAIL_PASSWORD",
            "label": "SMTP password",
            "initialValue": "",
            "type": "password"
            },
            {
            "name": "MAIL_ENCRYPTION",
            "label": "Encryption (tls or ssl)",
            "initialValue": "tls",
            "type": "text"
            },
            {
            "name": "MAIL_FROM_NAME",
            "label": "Email 'from' name",
            "initialValue": "",
            "type": "text"
            },
            {
            "name": "MAIL_FROM_ADDRESS",
            "label": "Email 'from' address",
            "initialValue": "",
            "type": "text"
            }
        ]
    },
    "name": "2fa",
    "services": {
        "{ServiceName}": {
            "container_name": "{ServiceName}",
            "hostname": "{ServiceName}",
            "image": "2fauth/2fauth",
            "restart": "unless-stopped",
            "security_opt": [
                "seccomp:unconfined"
            ],
            "environment": [
                "APP_NAME=2FAuth",
                "APP_ENV=local",
                "APP_DEBUG=false",
                "SITE_OWNER={Context.SITE_OWNER}",
                "APP_KEY=tLfTrAbKr3NBWtHlTmkMF65HHd8qrmWD",
                "APP_URL=https://{Hostnames.{StaticServiceName}.{StaticServiceName}.host}",
                "IS_DEMO_APP=false",
                "LOG_CHANNEL=daily",
                "LOG_LEVEL=notice",
                "DB_DATABASE=\"/srv/database/database.sqlite\"",
                "CACHE_DRIVER=file",
                "SESSION_DRIVER=file",
                "MAIL_DRIVER=log",
                "MAIL_HOST={Context.MAIL_HOST}",
                "MAIL_PORT={Context.MAIL_PORT}",
                "MAIL_FROM={Context.MAIL_FROM}",
                "MAIL_USERNAME={Context.MAIL_USERNAME}",
                "MAIL_PASSWORD={Context.MAIL_PASSWORD}",
                "MAIL_ENCRYPTION={Context.MAIL_ENCRYPTION}",
                "MAIL_FROM_NAME={Context.MAIL_FROM_NAME}",
                "MAIL_FROM_ADDRESS={Context.MAIL_FROM_ADDRESS}",
                "AUTHENTICATION_GUARD=web-guard",
                "AUTH_PROXY_HEADER_FOR_USER=null",
                "AUTH_PROXY_HEADER_FOR_EMAIL=null",
                "PROXY_LOGOUT_URL=null",
                "WEBAUTHN_NAME=2FAuth",
                "WEBAUTHN_ID=null",
                "WEBAUTHN_ICON=null",
                "WEBAUTHN_USER_VERIFICATION=preferred",
                "TRUSTED_PROXIES=*",
                "BROADCAST_DRIVER=log",
                "QUEUE_DRIVER=sync",
                "SESSION_LIFETIME=120",
                "REDIS_HOST={ServiceName}-redis",
                "REDIS_PASSWORD={Passwords.1}",
                "REDIS_PORT=6379",
                "PUSHER_APP_ID=",
                "PUSHER_APP_KEY=",
                "PUSHER_APP_SECRET=",
                "PUSHER_APP_CLUSTER=mt1",
                "MIX_PUSHER_APP_KEY=\"${PUSHER_APP_KEY}\"",
                "MIX_PUSHER_APP_CLUSTER=\"${PUSHER_APP_CLUSTER}\"",
                "MIX_ENV=local"
            ],
            "networks": {
                "{ServiceName}": {}
            },
            "network_mode": "{ServiceName}",
            "volumes": [
                {
                "type": "volume",
                "source": "{ServiceName}-2fauth",
                "target": "/2fauth"
                },
                {
                "type": "volume",
                "source": "{ServiceName}-database",
                "target": "/srv/database"
                }
            ],
            "routes": [
                {
                "name": "{ServiceName}",
                "description": "Expose {ServiceName} to the web",
                "useHost": true,
                "target": "http://{ServiceName}:8000",
                "mode": "SERVAPP",
                "Timeout": 14400000,
                "ThrottlePerMinute": 12000,
                "BlockCommonBots": true,
                "SmartShield": { "Enabled": true }
                }
            ],
            "labels": {
                "cosmos.stack": "{ServiceName}",
                "cosmos.stack.main": "{ServiceName}",
                "cosmos-auto-update": "true",
                "cosmos-icon": "https://ragdata.github.io/cosmos-servapps/servapps/2fauth/icon.png",
                "cosmos-force-network-mode": "{ServiceName}",
                "cosmos-force-network-secured": "true"
            }
        },
        "{ServiceName}-redis": {
            "container_name": "{ServiceName}-redis",
            "hostname": "{ServiceName}-redis",
            "image": "bitnami/redis:7.0",
            "restart": "unless-stopped",
            "environment": [
                "REDIS_PASSWORD={Passwords.1}"
            ],
            "networks": {
                "{ServiceName}": {}
            },
            "network_mode": "{ServiceName}",
            "volumes": [
                {
                "source": "{ServiceName}-redis",
                "target": "/bitnami/redis",
                "type": "volume"
                }
            ],
            "labels": {
                "cosmos.stack": "{ServiceName}",
                "cosmos-auto-update": "true",
                "cosmos-icon": "https://ragdata.github.io/cosmos-servapps/servapps/2fauth/icon.png",
                "cosmos-force-network-mode": "{ServiceName}",
                "cosmos-force-network-secured": "true"
            }
        }
    },
    "volumes": {
        "{ServiceName}-redis": {}
    },
    "networks": {
        "{ServiceName}": {}
    }
}
