{
    "services": {
      "{ServiceName}-agent": {
        "container_name": "{ServiceName}-agent",
        "image": "portainer/agent",
        "ports": [
          "9001:9001"
        ],
        "volumes": [
          {
            "source": "/var/run/docker.sock",
            "target": "/var/run/docker.sock",
            "type": "bind"
          },
          {
            "source": "/var/lib/docker/volumes",
            "target": "/var/lib/docker/volumes",
            "type": "bind"
          }
        ],
        "depends_on": {
          "portainer": {}
        },
          "restart_policy": {
            "condition": "unless-stopped",
            "delay": "5s",
            "window": "120s"
          }
        },
        "hostname": "{ServiceName}-agent",
        "network_mode": "cosmos-agent-default",
        "labels": {
          "cosmos.stack": "agent",
          "cosmos.stack.main": "true"
        }
      },
      "{ServiceName}": {
        "container_name": "{ServiceName}",
        "image": "portainer/portainer-be:latest",
        "ports": [
          "8000:8000",
          "9443:9443"
        ],
        "volumes": [
          {
            "source": "/var/run/docker.sock",
            "target": "/var/run/docker.sock",
            "type": "bind"
          },
          {
            "source": "{ServiceName}_data",
            "target": "/data",
            "type": "volume"
          }
        ],
        "networks": {
          "{ServiceName}_network": {}
        },
          "restart_policy": {
            "condition": "unless-stopped",
            "delay": "5s",
            "window": "120s"
          }
        },
        "hostname": "{ServiceName}",
        "network_mode": "cosmos-agent-default",
        "labels": {
          "cosmos.stack": "agent"
        }
}